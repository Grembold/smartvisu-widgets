/**
* LED - shows a LED with a color depending on the value of the gad
* 
* Parameters:
* id:           unique id for this widget
* gad:          a gad/item
* red_value:    the value when the LED shall be red (optional)
* green_value:  the value when the LED shall be green (optional)
* blue_value:   the value when the LED shall be blue (optional)
* yellow_value: the value when the LED shall be yellow (optional)
*
*  The script should be moved to the visu.js of the page
*
*  These styles must be defined in the visu.css of the page
*/

{% macro led(id, gad, red_value, green_value, blue_value, yellow_value) %}
	<div class="LED" 
       id="{{ uid(page, id) }}" 
       data-widget="widget_led.led" 
       data-item="{{ gad }}" 
       data-red-value="{{ red_value }}"
       data-green-value="{{ green_value }}" 
       data-blue-value="{{ blue_value }}"
       data-yellow-value="{{ yellow_value }}"
      >
  </div>

<script type="text/javascript">
 
 $(document).delegate('[data-widget="widget_led.led"]', {
	'update': function (event, response) {
    var led = $('#' + this.id);
    if(response == $(this).attr('data-green-value')) {
      led.removeClass();
      led.addClass("LED LED-green");
    }
    else if(response == $(this).attr('data-red-value')) {
      led.removeClass();
      led.addClass("LED LED-red");
    }
    else if(response == $(this).attr('data-blue-value')) {
      led.removeClass();
      led.addClass("LED LED-blue");
    }
    else if(response == $(this).attr('data-yellow-value')) {
      led.removeClass();
      led.addClass("LED LED-yellow");
    }
    else {
      led.removeClass();
      led.addClass("LED");
    }
		
	}
  
});
</script>
  
{% endmacro %}
